<!DOCTYPE html>
<html>
   <head>
      <title></title>
      <meta name="apple-mobile-web-app-capable" content="yes">
      <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet" type="text/css"/>
      <meta name="viewport" content="width = device-width, initial-scale = 1"/>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <link  rel="icon" href="favicon.png" type="image/png"/>
      <link rel="shortcut icon" href="favicon.png" type="image/png""/>
      <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
      <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script> 
      <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
      <link rel="stylesheet" href="style.css">
      <style>
        
      </style>
      <script type = "text/javascript" language = "javascript">
         var mqtt;
         var reconnectTimeout = 2000;
         var host="192.168.200.186"; //change this
         var port=1884;
         
         function onConnect() {
         // Once a connection has been made, make a subscription and send a message.
         console.log("Connected ");
         //mqtt.subscribe("sensor1");
         message = new Paho.MQTT.Message("test");
         message.destinationName = "light_intensity";
         mqtt.send(message);
         }
         
         function MQTTconnect() {
         console.log("connecting to "+ host +" "+ port);
         mqtt = new Paho.MQTT.Client(host,port,"/sensors","clientjs");
         //document.write("connecting to "+ host);
         var options = {
            timeout: 3,
            onSuccess: onConnect,
          };
          
         mqtt.connect(options); //connect
         }
         
      </script>
   </head>
   <body>
      <div class="container-fluid">
      <header>Smart Home</header>
      <div class="row wide">
      <!-- LIGHTING -->
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" >
         <button  class="btn  btn-block btn-square background" href="#lights" data-toggle="collapse">Lights <img class="nav-image" src="images/light.png"></button>
         <div id="lights" class="collapse col-lg-12 col-md-12 col-sm-12 col-xs-12">
         	<input type="checkbox">Enable Manual Control of Lights<br>
            <div class="tab-label">Light Intesity</div>
            <div class="circled-number">69</div>
            <div class="tab-label">Control Lights</div>
            <div class="button-div"><input type="checkbox" checked data-toggle="toggle" data-width="150"></div>
         </div>
      </div>
      <!-- HVAC -->
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
      <button class="btn  btn-block btn-square background" href="#hvac" data-toggle="collapse">HVAC <img class="nav-image" src="images/fan.png"></button>
      <div id="hvac" class="collapse">
      	<input type="checkbox">Enable Manual Control of Lights<br>
         <div class="tab-label">Temperature&#8457;</div>
         <div class="circled-number"><span id="temp-number">69</span></div>
         <div class="tab-label">Set Temperature</div>
         <div class="set-temp">
            <a id="minus">
            <span class="glyphicon glyphicon-minus"></span>
            </a>
            <span id="set-temp-number">68</span>
            <a id="plus">
            <span class="glyphicon glyphicon-plus"></span>
            </a>
         </div>
         <div class="button-div"><input type="checkbox" checked data-toggle="toggle" data-width="150"></div>
      </div>
  </div>
      <!-- SECURITY SYSTEM-->
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
         <button class="btn  btn-block btn-square background" href="#security" data-toggle="collapse">Security <img class="nav-image" src="images/security.png"></button>
         <div id="security" class="collapse">
         	<div class="tab-label" style="font-size: 18px;">Last Motion Detected: </div> 
            <div class="button-div"><input type="checkbox" checked data-toggle="toggle" data-width="150" data-on="Armed" data-off="Disarmed"></div>
         </div>
     </div>

         <!-- OTHER -->
         <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <button class="btn  btn-block btn-square background" href="#other" data-toggle="collapse">Other</button>
            <div id="other" class="collapse">
               <div class="tab-label">Other</div>
               <div class="button-div"></div>
            </div>
         </div>
      </div>
      <script>
         MQTTconnect(); 
          $(document).ready(function () {
              $("button").click(function () {
                  if ($(this).hasClass("btn-shrink")) {
                      $(this).toggleClass("btn-shrink");
                  }
                  else {
                      $(".background.btn-shrink").toggleClass("btn-shrink");
                      $(".collapse.in").removeClass("in");
                      $(this).toggleClass("btn-shrink");
                      $('html,body').animate({
                          scrollTop: ($(this).offset().top)
                      }, 500);
                  }
              });
         
             $("#plus").click(function () {
         
                  var new_val = document.getElementById("set-temp-number").innerHTML; 
                  document.getElementById("set-temp-number").innerHTML = parseInt(new_val)+1;
         
             });
             $("#minus").click(function () {
                  var new_val = document.getElementById("set-temp-number").innerHTML; 
                  document.getElementById("set-temp-number").innerHTML = parseInt(new_val)-1;
             });
           });            
      </script>
   </body>
</html>